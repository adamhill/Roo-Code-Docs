<content_standards>
  <overview>
    Formatting, content standards, and PR analysis patterns for release notes.
    Ensures consistent, user-focused documentation in docs/update-notes.
  </overview>

  <file_structure>
    <naming_conventions>
      <convention type="patch_release">
        <format>vX.Y.Z.mdx</format>
        <example>v3.20.3.mdx</example>
      </convention>
      <convention type="minor_major_release">
        <format>vX.Y.mdx</format>
        <example>v3.20.mdx</example>
        <description>Summarizes a release cycle</description>
      </convention>
    </naming_conventions>

    <required_elements>
      <element name="frontmatter">
        <format><![CDATA[
---
description: A concise summary of the release.
keywords:
  - roo code x.y.z
  - new features
  - bug fixes
image: /img/social-share.jpg
---
        ]]></format>
      </element>
      
      <element name="title">
        <format># Roo Code X.Y.Z Release Notes (YYYY-MM-DD)</format>
        <requirements>
          - Include version number
          - Include release date in ISO 8601 format
          - Date from GitHub tag OR current date if PR list provided
        </requirements>
      </element>

      <element name="summary_sentence">
        <location>Below title</location>
        <example>This release adds context condensing, improves performance, and fixes UI bugs.</example>
      </element>

      <element name="inline_hero_image">
        <location>Immediately after the intro summary sentence</location>
        <rules>
          - Insert only if frontmatter image path resolves to "/img/..." and is not "/img/social-share.jpg"
          - Use an HTML image tag per site rules with width="600"
          - Set src from .roo/tmp/release-notes/frontmatter_image_v[version].txt and alt to "Roo Code v[VERSION] Release"
        </rules>
        <template><![CDATA[
<img src="/img/vX.Y.Z/vX.Y.Z.png" alt="Roo Code vX.Y.Z Release" width="600" />
        ]]></template>
      </element>
    </required_elements>
  </file_structure>

  <pr_analysis>
    <framework>
      <step number="1">What changed? (Identify core feature)</step>
      <step number="2">Why did it change? (Problem solved)</step>
      <step number="3">How does this impact users? (Concrete benefits)</step>
    </framework>

    <categorization>
      <category name="major_features">
        <criteria>New functionality changing user experience</criteria>
        <format>Own ## heading with expanded description</format>
        <template><![CDATA[
## [Feature Name]

We've [improvement description] (thanks [contributors]!) ([#PR](link)):

- **[Benefit 1]**: [How this helps users]
- **[Benefit 2]**: [Another benefit]

[Concluding sentence about impact]

> **ðŸ“š Documentation**: See [Feature Guide](/path/to/feature) for detailed usage instructions.
        ]]></template>
      </category>
      
      <category name="qol_improvements">
        <criteria>UI/UX enhancements, workflow optimizations</criteria>
        <format>Under ## QOL Improvements</format>
        <critical>MUST come before Bug Fixes section</critical>
      </category>
      
      <category name="bug_fixes">
        <criteria>Resolves issues, fixes errors</criteria>
        <format>Under ## Bug Fixes as bullet points</format>
        <critical>MUST come after QOL Improvements section</critical>
      </category>
      
      <category name="provider_updates">
        <criteria>API provider changes</criteria>
        <format>Under ## Provider Updates</format>
      </category>
    </categorization>

    <documentation_flags>
      <flag name="docs-new">Completely new feature requiring new page</flag>
      <flag name="docs-update">Existing documentation needs updating</flag>
      <flag name="docs-example">New examples or use cases to add</flag>
      <flag name="docs-migration">Migration guide needed for breaking changes</flag>
    </documentation_flags>
  </pr_analysis>

  <content_formatting>
    <expanded_sections>
      <description>Major features with details</description>
      <format><![CDATA[
## Feature Name

Description of what the feature does (thanks contributor!) ([#PR](link)):

- **Key Point 1**: Explanation of this aspect.
- **Key Point 2**: Another explanation.

Concluding sentence about the benefit.

> **ðŸ“š Documentation**: See [Feature Guide](/path/to/feature) for detailed usage.
      ]]></format>
    </expanded_sections>

    <grouped_sections>
      <description>Smaller fixes and improvements</description>
      <format><![CDATA[
## Section Name

* **Item Name**: Single-line description (thanks contributor!) ([#PR](link))
* **Another Item**: Another description ([#PR](link))
      ]]></format>
    </grouped_sections>

    <contributor_acknowledgments>
      <format>(thanks username!)</format>
      <multiple>(thanks author, reporter!)</multiple>
      <rules>
        - Omit @ from GitHub usernames
        - Place inside parentheses before PR link
        - Include both PR author and issue reporter
        - List PR author first
        - If PR author equals issue reporter, use a single username once
        - Do not thank these names: outlined in the special instructions section `Release Notes "thank you" exclusions`
      </rules>
    </contributor_acknowledgments>

    <pr_links>
      <format>([#PR_NUMBER](https://github.com/RooCodeInc/Roo-Code/pull/PR_NUMBER))</format>
      <placement>
        <expanded>In intro paragraph or bullet points</expanded>
        <grouped>At end of each bullet point</grouped>
      </placement>
    </pr_links>
  </content_formatting>

  <section_ordering>
    <order>
      1. Major feature sections (each with own heading)
      2. ## QOL Improvements
      3. ## Bug Fixes
      4. ## Misc Improvements
      5. ## Provider Updates
      6. ## Documentation Updates
    </order>
    <critical>QOL Improvements MUST always come before Bug Fixes</critical>
  </section_ordering>

  <index_updates>
    <file>docs/update-notes/index.md</file>
    <format>[X.Y.Z](/update-notes/vX.Y.Z) (YYYY-MM-DD)</format>
    <rules>
      - List chronologically, newest first
      - Use absolute paths from site root (no /docs prefix)
      - Omit .md extension
      - Include release date in ISO 8601 format
    </rules>
  </index_updates>

  <sidebar_updates>
    <file>sidebars.ts</file>
    <format>'update-notes/vX.Y.Z'</format>
    <rules>
      - Add to "Update Notes" category
      - Use Docusaurus ID format
      - Maintain chronological order
    </rules>
  </sidebar_updates>

  <combined_notes_updates>
    <description>Integrate patch releases into parent minor/major file</description>
    <rules>
      - Add changes to corresponding existing sections
      - Maintain consistent formatting and section order
      - Append new items to end of respective sections
      - Consolidate duplicate fixes across patches
      - Update summary sentence if significant features added
    </rules>
  </combined_notes_updates>

  <language_guide>
    <focus>User benefits, not implementation details</focus>
    <tense>Present tense ("adds" not "added")</tense>
    <transformations>
      <from>Refactored</from><to>Improved</to>
      <from>Implemented</from><to>Added</to>
      <from>Optimized algorithm</from><to>Made faster</to>
      <from>Fixed race condition</from><to>Fixed timing issue</to>
    </transformations>
  </language_guide>

  <documentation_links>
    <patterns>
      <inline>[Feature Name](/path/to/feature)</inline>
      <see_also><![CDATA[
> **ðŸ“š Documentation**: See [Feature Guide](/path) for detailed usage instructions.
      ]]></see_also>
      <migration><![CDATA[
> **ðŸ”„ Migration Guide**: If upgrading from v[OLD], see our [migration guide](/migration/vX-to-vY).
      ]]></migration>
    </patterns>
    <auto_linking>
      - Modes: /features/modes/[mode-slug]
      - Tools: /advanced-usage/available-tools#[tool-name]
      - MCP: /features/mcp/
      - Providers: /providers/
    </auto_linking>
    <rules>
      - Use absolute paths starting from root (without /docs prefix)
      - No .md extensions in links
      - All major features must have documentation links
    </rules>
  </documentation_links>

  <forbidden_elements>
    - "Summary" or "Highlights" sections in docs/update-notes (Discord announcements may use "Feature Highlights")
    - Version numbers in docs outside update-notes
    - Temporal references like "as of version X.Y.Z"
    - Marketing language or buzzwords
    - Generic headings like "## Changes" or "## Updates"
  </forbidden_elements>

  <discord_formatting>
    <overview>
      Special formatting rules for Discord announcements that reflect our latest house style and the final transformation flow.
    </overview>

    <structure>
      <element name="wrapper">
        <format>```markdown ... ```</format>
        <description>Wrap the entire announcement in a markdown code block</description>
      </element>

      <element name="title">
        <format># :rocket: Roo Code X.Y.Z Release Updates</format>
        <format_combined># :rocket: Roo Code X.Y.Z-X.Y.Z Release Updates</format_combined>
        <rules>
          - Use :rocket: shortcode (not the emoji)
          - Use "Release Updates" (not "Release Notes") for both single and combined versions
          - For combined announcements, use "X.Y.Z-X.Y.Z" range formatting
        </rules>
      </element>

      <element name="tagline">
        <format>@everyone [short hero summary]</format>
        <rules>
          - Discord only (omit from Reddit)
          - Keep to a single concise line (e.g., "GPTâ€‘5â€‘Codex toolâ€‘usage fix, more FREE models on Roo Code Cloud and more!")
        </rules>
      </element>

      <element name="sections">
        <order>
          1. ## Fixed: GPT-5-Codex errors and others!
          2. ## Context condensing fix
          3. ## More free models on Roo Code Cloud
          4. ## More Changes
        </order>
        <rules>
          - No emojis in section headers
          - In "Fixed: GPT-5-Codex...", copy the leading sentence EXACTLY from docs (include the PR link if present)
          - Under that hero sentence, include the three bullets verbatim; render bullets as "- " hyphens
        </rules>
      </element>

      <element name="footer_blurb">
        <format_single><![CDATA[
See full release notes [vX.Y.Z](https://docs.roocode.com/update-notes/vX.Y.Z)
        ]]></format_single>
        <format_combined><![CDATA[
See full release notes [vX.Y.Z](https://docs.roocode.com/update-notes/vX.Y.Z) | [vX.Y.Z](https://docs.roocode.com/update-notes/vX.Y.Z)
        ]]></format_combined>
        <rules>
          - Use markdown inline links with the version as the anchor text
          - For multiple versions, join links with " | "
        </rules>
      </element>
    </structure>

    <content_rules>
      <rule priority="critical">No version numbers in body text (only header/footer)</rule>
      <rule priority="critical">Never use marketing language</rule>
      <rule priority="high">Retain PR link ONLY in the hero GPTâ€‘5â€‘Codex section; remove PR links/numbers elsewhere</rule>
      <rule priority="high">Convert any relative docs links to absolute https://docs.roocode.com paths</rule>
      <rule priority="high">Use hyphen bullets ("- ") everywhere</rule>
      <rule priority="medium">If long or on request, summarize remaining items into a single "More Changes" paragraph with contributor thanks and total change count</rule>
    </content_rules>

    <transformations>
      <from>* </from>
      <to>- </to>

      <from>([#PR](link))</from>
      <to>(remove everywhere except retain in the hero GPTâ€‘5â€‘Codex section)</to>

      <from>/path/to/page</from>
      <to>https://docs.roocode.com/path/to/page</to>
    </transformations>
  </discord_formatting>

  <reddit_formatting>
    <overview>
      Formatting for Reddit announcements, paired with Discord output by default.
    </overview>

    <structure>
      <element name="wrapper">
        <format>```markdown ... ```</format>
        <description>Wrap the entire announcement in a markdown code block</description>
      </element>
      <element name="title">
        <format>Roo Code X.Y.Z-X.Y.Z Release Updates | FREE models | GPTâ€‘5â€‘Codex toolâ€‘usage fix | More fixes!</format>
        <rules>
          - Plain text line (no leading "#")
          - Include the three-part summary fragments as shown
        </rules>
      </element>

      <element name="intro_note">
        <format>*In case you did not know, r/RooCode is a Free and Open Source VS Code AI Coding extension.*</format>
      </element>

      <element name="sections">
        <order>
          1. ## More free models on Roo Code Cloud
          2. ## Fixed: GPT-5-Codex errors and others!
          3. ## Context condensing fix
          4. ## More Changes
        </order>
        <rules>
          - Wrap entire output in a markdown code block
          - No @everyone line
          - No emojis in section headers
          - Use hyphen bullets ("- ")
          - Remove PR links everywhere (including hero)
        </rules>
      </element>

      <element name="footer_blurb">
        <format_single><![CDATA[
See full release notes [vX.Y.Z](https://docs.roocode.com/update-notes/vX.Y.Z)
        ]]></format_single>
        <format_combined><![CDATA[
See full release notes [vX.Y.Z](https://docs.roocode.com/update-notes/vX.Y.Z) | [vX.Y.Z](https://docs.roocode.com/update-notes/vX.Y.Z)
        ]]></format_combined>
      </element>
    </structure>

    <content_rules>
      <rule priority="critical">No version numbers in body text</rule>
      <rule priority="high">Remove all PR numbers and links</rule>
      <rule priority="high">Use absolute docs links</rule>
      <rule priority="high">Use hyphen bullets ("- ")</rule>
    </content_rules>
  </reddit_formatting>

  <cross_posting>
    <rule>When the user asks for Discord notes, also produce Reddit notes in the same response.</rule>
    <rule>When the user asks for Reddit notes, also produce Discord notes in the same response.</rule>
  </cross_posting>
</content_standards>